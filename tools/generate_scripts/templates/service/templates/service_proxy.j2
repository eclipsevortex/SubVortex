[Unit]
Description=SubVortex {{ neuron | title }} HAProxy
After=network.target

[Service]
Type=notify
ExecStart=/usr/sbin/haproxy -Ws -f /etc/haproxy/haproxy.cfg
ExecReload=/bin/kill -USR2 $MAINPID
PIDFile=/run/haproxy.pid
User=haproxy
Group=haproxy

RuntimeDirectory=haproxy
RuntimeDirectoryMode=0755
LimitNOFILE=65536
Restart=always
PrivateTmp=yes
NoNewPrivileges=true
ProtectSystem=full
ReadWriteDirectories=-/var/log/subvortex-{{ neuron }}
CapabilityBoundingSet=CAP_NET_BIND_SERVICE

[Install]
WantedBy=multi-user.target
Alias=subvortex-{{ neuron }}-haproxy.service
